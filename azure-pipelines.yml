trigger:
- main

pool:
  vmImage: windows-latest   # ou windows-latest si dispo

variables:
  buildConfiguration: 'Release'

jobs:
- job: Build
  steps:
  - script: |
      wget https://dot.net/v1/dotnet-install.sh -O dotnet-install.sh
      chmod +x dotnet-install.sh
      ./dotnet-install.sh --channel 8.0
      export PATH=$HOME/.dotnet:$PATH
      dotnet --info
      dotnet restore
      dotnet build --configuration $(buildConfiguration)
      dotnet test --configuration $(buildConfiguration) --no-build
    displayName: "Build & Test"
